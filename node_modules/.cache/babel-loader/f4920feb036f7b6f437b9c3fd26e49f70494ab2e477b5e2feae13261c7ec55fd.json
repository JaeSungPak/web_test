{"ast":null,"code":"var _jsxFileName = \"/Users/parkjaesung/Documents/GitHub/mingle_ai_web/src/modules/toMesh/components/Notification.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Toaster, toast } from \"react-hot-toast\";\nimport { onMessageListener } from \"modules/toMesh/notification/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction requestPermission() {\n  console.log(\"권한 요청 중...\");\n  Notification.requestPermission().then(permission => {\n    if (permission === \"granted\") {\n      console.log(\"알림 권한이 허용됨\");\n\n      // FCM 메세지 처리\n    } else {\n      console.log(\"알림 권한 허용 안됨\");\n    }\n  });\n}\nfunction Notification() {\n  _s();\n  const [notification, setNotification] = useState({\n    title: \"\",\n    body: \"\"\n  });\n  useEffect(() => {\n    requestPermission();\n    const unsubscribe = onMessageListener().then(payload => {\n      var _payload$notification, _payload$notification2, _payload$notification3, _payload$notification4;\n      setNotification({\n        title: payload === null || payload === void 0 ? void 0 : (_payload$notification = payload.notification) === null || _payload$notification === void 0 ? void 0 : _payload$notification.title,\n        body: payload === null || payload === void 0 ? void 0 : (_payload$notification2 = payload.notification) === null || _payload$notification2 === void 0 ? void 0 : _payload$notification2.body\n      });\n      toast.success(`${payload === null || payload === void 0 ? void 0 : (_payload$notification3 = payload.notification) === null || _payload$notification3 === void 0 ? void 0 : _payload$notification3.title}: ${payload === null || payload === void 0 ? void 0 : (_payload$notification4 = payload.notification) === null || _payload$notification4 === void 0 ? void 0 : _payload$notification4.body}`, {\n        duration: 60000,\n        position: \"top-right\"\n      });\n    });\n    return () => {\n      unsubscribe.catch(err => console.log(\"failed: \", err));\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Toaster, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(Notification, \"CalJBYTEvBu+nI+Kflm9FaxP42E=\");\n_c = Notification;\nexport default Notification;\nvar _c;\n$RefreshReg$(_c, \"Notification\");","map":{"version":3,"names":["React","useState","useEffect","Toaster","toast","onMessageListener","jsxDEV","_jsxDEV","requestPermission","console","log","Notification","then","permission","_s","notification","setNotification","title","body","unsubscribe","payload","_payload$notification","_payload$notification2","_payload$notification3","_payload$notification4","success","duration","position","catch","err","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/parkjaesung/Documents/GitHub/mingle_ai_web/src/modules/toMesh/components/Notification.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Toaster, toast } from \"react-hot-toast\";\nimport { onMessageListener } from \"modules/toMesh/notification/firebase\";\n\nfunction requestPermission() {\n  console.log(\"권한 요청 중...\");\n  Notification.requestPermission().then((permission) => {\n    if (permission === \"granted\") {\n      console.log(\"알림 권한이 허용됨\");\n\n      // FCM 메세지 처리\n    } else {\n      console.log(\"알림 권한 허용 안됨\");\n    }\n  });\n}\n\nfunction Notification() {\n  const [notification, setNotification] = useState({ title: \"\", body: \"\" });\n  useEffect(() => {\n    requestPermission();\n    const unsubscribe = onMessageListener().then((payload) => {\n      setNotification({\n        title: payload?.notification?.title,\n        body: payload?.notification?.body,\n      });\n      toast.success(\n        `${payload?.notification?.title}: ${payload?.notification?.body}`,\n        {\n          duration: 60000,\n          position: \"top-right\",\n        }\n      );\n    });\n    return () => {\n      unsubscribe.catch((err) => console.log(\"failed: \", err));\n    };\n  }, []);\n  return (\n    <div>\n      <Toaster />\n    </div>\n  );\n}\nexport default Notification;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,OAAO,EAAEC,KAAK,QAAQ,iBAAiB;AAChD,SAASC,iBAAiB,QAAQ,sCAAsC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzE,SAASC,iBAAiBA,CAAA,EAAG;EAC3BC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;EACzBC,YAAY,CAACH,iBAAiB,CAAC,CAAC,CAACI,IAAI,CAAEC,UAAU,IAAK;IACpD,IAAIA,UAAU,KAAK,SAAS,EAAE;MAC5BJ,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;;MAEzB;IACF,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC5B;EACF,CAAC,CAAC;AACJ;AAEA,SAASC,YAAYA,CAAA,EAAG;EAAAG,EAAA;EACtB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC;IAAEgB,KAAK,EAAE,EAAE;IAAEC,IAAI,EAAE;EAAG,CAAC,CAAC;EACzEhB,SAAS,CAAC,MAAM;IACdM,iBAAiB,CAAC,CAAC;IACnB,MAAMW,WAAW,GAAGd,iBAAiB,CAAC,CAAC,CAACO,IAAI,CAAEQ,OAAO,IAAK;MAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;MACxDR,eAAe,CAAC;QACdC,KAAK,EAAEG,OAAO,aAAPA,OAAO,wBAAAC,qBAAA,GAAPD,OAAO,CAAEL,YAAY,cAAAM,qBAAA,uBAArBA,qBAAA,CAAuBJ,KAAK;QACnCC,IAAI,EAAEE,OAAO,aAAPA,OAAO,wBAAAE,sBAAA,GAAPF,OAAO,CAAEL,YAAY,cAAAO,sBAAA,uBAArBA,sBAAA,CAAuBJ;MAC/B,CAAC,CAAC;MACFd,KAAK,CAACqB,OAAO,CACV,GAAEL,OAAO,aAAPA,OAAO,wBAAAG,sBAAA,GAAPH,OAAO,CAAEL,YAAY,cAAAQ,sBAAA,uBAArBA,sBAAA,CAAuBN,KAAM,KAAIG,OAAO,aAAPA,OAAO,wBAAAI,sBAAA,GAAPJ,OAAO,CAAEL,YAAY,cAAAS,sBAAA,uBAArBA,sBAAA,CAAuBN,IAAK,EAAC,EACjE;QACEQ,QAAQ,EAAE,KAAK;QACfC,QAAQ,EAAE;MACZ,CACF,CAAC;IACH,CAAC,CAAC;IACF,OAAO,MAAM;MACXR,WAAW,CAACS,KAAK,CAAEC,GAAG,IAAKpB,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEmB,GAAG,CAAC,CAAC;IAC1D,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,oBACEtB,OAAA;IAAAuB,QAAA,eACEvB,OAAA,CAACJ,OAAO;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEV;AAACpB,EAAA,CA1BQH,YAAY;AAAAwB,EAAA,GAAZxB,YAAY;AA2BrB,eAAeA,YAAY;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}